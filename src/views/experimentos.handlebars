<main style="max-width:1000px;margin:2em auto;padding:2em 1em;">
  <h2 style="color:#2563eb;">Experimentos</h2>
  <div style="display:flex;gap:1em;flex-wrap:wrap;align-items:center;margin-bottom:2em;">
    <form method="get" style="display:flex;gap:1em;flex-wrap:wrap;align-items:center;">
      <label>Nível:
        <select name="nivel">
          <option value="" {{#unless nivel}}selected{{/unless}}>Todos</option>
          <option value="iniciante" {{#if (eq nivel 'iniciante')}}selected{{/if}}>Fundamental</option>
          <option value="intermediario" {{#if (eq nivel 'intermediario')}}selected{{/if}}>Médio</option>
          <option value="avancado" {{#if (eq nivel 'avancado')}}selected{{/if}}>Avançado</option>
        </select>
      </label>
      <label>Tema:
        <input type="text" name="tema" placeholder="Ex: ácidos, reações..." style="padding:0.5em;" value="{{tema}}">
      </label>
      <button type="submit" class="cta-secondary">Filtrar</button>
    </form>
    <a href="/experimentos/novo" class="cta" style="margin-left:auto;">+ Novo Experimento</a>
  </div>
  <div style="display:flex;flex-wrap:wrap;gap:1.5em;justify-content:center;">
    {{#each experimentos}}
      <div class="post-card" style="width:280px;position:relative;{{#if pro}}opacity:0.6;pointer-events:none;{{/if}}">
        {{#if imagem}}
          <img src="{{imagem}}" alt="{{titulo}}" style="width:100%;height:140px;object-fit:cover;border-radius:8px;">
        {{/if}}
        <h3 style="margin:0.5em 0 0.2em 0;">{{titulo}}</h3>
        <p style="color:#64748b;">{{resumo}}</p>
        <span style="font-size:0.95em;">Nível: {{nivel}}</span><br>
        <span style="font-size:0.95em;">Tema: {{tema}}</span><br>
        <a href="/experimentos/{{id}}" class="cta-secondary" style="margin-top:0.5em;display:inline-block;">Ver detalhes</a>
        <form method="post" action="/experimentos/{{id}}/explicar" style="display:inline;margin-left:0.5em;">
          <input type="hidden" name="pergunta" value="Explique o experimento: {{titulo}}. {{resumo}}">
          <button type="submit" class="cta-secondary" style="font-size:0.95em;">Explicar com IA</button>
        </form>
        {{#if pro}}
          <div style="position:absolute;top:10px;right:10px;background:#3B82F6;color:#fff;padding:0.2em 0.7em;border-radius:8px;font-size:0.95em;">Pro</div>
        {{/if}}
      </div>
    {{else}}
      <p>Nenhum experimento encontrado.</p>
    {{/each}}
  </div>
</main>
